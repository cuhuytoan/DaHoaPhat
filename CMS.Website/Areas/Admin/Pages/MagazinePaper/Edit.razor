@page "/Admin/MagazinePaper/Edit"

<div class="row">
    <div class="col-sm-12">
        <div class="white-box">
            <h3 class="box-title m-b-0">Cập nhật số báo</h3>
            <p class="text-muted m-b-30 font-13"> Cập nhật chi tiết số báo </p>
            <EditForm Model="magazinePaperModel" OnValidSubmit="@OnPostMagazinePaper">
                <DataAnnotationsValidator />

                <input type="hidden" class="form-control" @bind="magazinePaperModel.MagazinePaper.Id">
                <div class="form-group row">
                    <button type="submit" class="btn btn-mat btn-success m-r-10 m-b-10" style="color: #FFFFFF;"><i class="fa fa-save"></i>Lưu</button>
                    <a class="btn btn-mat btn-warning m-r-10 m-b-10" style="color: #FFFFFF;" href="/Admin/MagazinePaper/Index"><i class="fa fa-times-circle"></i>Trở về</a>
                </div>
                <div class="form-group row">
                    <div class="col-sm-12">
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Tên số báo</label>
                            <div class="col-sm-10">
                                <input type="text" class="form-control" @bind="magazinePaperModel.MagazinePaper.Name" placeholder="Nhập tên số báo">
                                <span class="text-danger"><ValidationMessage For="() => magazinePaperModel.MagazinePaper.Name" /></span>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Mô tả ngắn</label>
                            <div class="col-sm-10">
                                <textarea type="text" style="height: 150px;" class="form-control" @bind="magazinePaperModel.MagazinePaper.Description" placeholder="Nhập mô tả ngắn"></textarea>
                                <span class="text-danger"><ValidationMessage For="() => magazinePaperModel.MagazinePaper.Description" /></span>
                            </div>
                        </div>

                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Bắt đầu</label>
                            <div class="col-sm-4">
                                <TelerikDatePicker @bind-Value="magazinePaperModel.MagazinePaper.StartDate"></TelerikDatePicker>
                                <span class="text-danger"><ValidationMessage For="() => magazinePaperModel.MagazinePaper.StartDate" /></span>
                            </div>
                            <label class="col-sm-3 col-form-label" style="text-align: right;">Ngày kết thúc</label>
                            <div class="col-sm-3">
                                <div style="float: right">
                                    <TelerikDatePicker @bind-Value="magazinePaperModel.MagazinePaper.EndDate"></TelerikDatePicker>
                                    <span class="text-danger"><ValidationMessage For="() => magazinePaperModel.MagazinePaper.EndDate" /></span>
                                </div>
                            </div>
                        </div>                        
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Danh sách bài viết </label>
                            <div class="col-sm-10">
                                <div class="table-responsive">
                                    <table class="table table-hover">
                                        <thead>
                                            <tr>
                                                <th style="width:100px;">
                                                </th>
                                                <th>
                                                    Tiêu đề
                                                </th>

                                                <th style="width:50px;">
                                                </th>

                                            </tr>
                                        </thead>
                                        <tbody>
                                            @if (lstArticleSelected == null)
                                            {
                                                <p><em>Loading...</em></p>
                                            }
                                            else
                                            {
                                                @foreach (var item in lstArticleSelected)
                                                {
                                                    <tr>
                                                        <td>
                                                            <img src="/data/article/mainimages/small/@item.Image" />
                                                        </td>
                                                        <td>
                                                            <div style="font-weight: 700;">
                                                                <a href="/Admin/Article/Edit?articleId=@item.Id">
                                                                    @item.Name
                                                                </a>
                                                            </div>
                                                            <div>
                                                                Đăng bởi <b>@item.CreateByName</b> vào lúc
                                                                <b>@item.CreateDate.Value.ToString("dd/MM/yyyy HH:mm")</b>
                                                            </div>
                                                            <div>
                                                                Chuyên mục: <span style="font-weight: 700; color: #0094ff;">@item.ArticleCategoryName</span>
                                                            </div>
                                                        </td>
                                                        <td style="text-align: center; padding-top: 30px;">
                                                            <a @onclick="() => OnRemmoveMagazinePaperArticle(item)"><i class="fa fa-trash"></i></a>
                                                        </td>

                                                    </tr>
                                                }
                                            }
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="col-sm-2 col-form-label">Danh sách bài viết đã đã duyệt đăng tạp chí giấy</label>
                            <div class="col-sm-10">
                                <InputText class="form-control m-r-10 m-b-10" type="search" @bind-Value="@keyword" placeholder="Từ khóa tìm kiếm..." />
                                <a class="btn btn-mat btn-success m-r-10 m-b-10" @onclick="() => OnSearchArticle(keyword)" style="color: #FFFFFF;"><i class="fa fa-search"></i>Tìm kiếm</a>
                            </div>
                        </div>
                        <div class="row">
                            <div class="col-xs-12 col-sm-12 col-md-12">
                                <div class="white-box">
                                    <div class="table-responsive">
                                        <table class="table table-hover">
                                            <thead>
                                                <tr>
                                                    <th style="width:100px;">
                                                    </th>
                                                    <th>
                                                        Tiêu đề
                                                    </th>
                                                    <th style="width:50px;">
                                                        Trạng thái
                                                    </th>
                                                    <th style="width:50px;">
                                                    </th>

                                                </tr>
                                            </thead>
                                            <tbody>
                                                @if (lstArticle == null)
                                                {
                                                    <p><em>Loading...</em></p>
                                                }
                                                else
                                                {
                                                    @foreach (var item in lstArticle)
                                                    {
                                                        <tr>
                                                            <td>
                                                                <img src="/data/article/mainimages/small/@item.Image" />
                                                            </td>
                                                            <td>
                                                                <div style="font-weight: 700;">
                                                                    <a href="/Admin/Article/Edit?articleId=@item.Id">
                                                                        @item.Name
                                                                    </a>
                                                                </div>
                                                                <div>
                                                                    Đăng bởi <b>@item.CreateByName</b> vào lúc
                                                                    <b>@item.CreateDate.Value.ToString("dd/MM/yyyy HH:mm")</b>
                                                                </div>
                                                                <div>
                                                                    Chuyên mục: <span style="font-weight: 700; color: #0094ff;">@item.ArticleCategoryName</span>
                                                                </div>
                                                            </td>
                                                            <td>
                                                                <div style="margin-top: 20px; text-align: center;">
                                                                    @{
                                                                        string styleStatus = "badge-success";
                                                                        if (item.ArticleStatusId == 0)
                                                                        {
                                                                            styleStatus = "badge-info";
                                                                        }
                                                                        else if (item.ArticleStatusId == 1)
                                                                        {
                                                                            styleStatus = "badge-warning";
                                                                        }
                                                                    }
                                                                    <label class='badge @styleStatus'> @item.StatusName</label>
                                                                </div>
                                                            </td>
                                                            <td style="text-align: center; padding-top: 30px;">
                                                                <a href="/Admin/Article/Preview?articleId=@item.Id">
                                                                    <i class="fa fa-eye" style="color: #0094ff;"></i>
                                                                </a>
                                                                <a @onclick="() => OnAddMagazinePaperArticle(item)"><i class="fa fa-plus-circle"></i></a>
                                                            </td>

                                                        </tr>
                                                    }
                                                }
                                            </tbody>
                                        </table>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                </div>

            </EditForm>


        </div>
    </div>
</div>
